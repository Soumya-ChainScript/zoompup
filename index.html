<script>
    window.onload = function () {
        if (!window.ZoomMtg) {
            console.error("Zoom SDK failed to load.");
            return;
        }

        const meetingId = new URLSearchParams(window.location.search).get("meetingId");
        const password = new URLSearchParams(window.location.search).get("password");
        const name = new URLSearchParams(window.location.search).get("name");

        if (!meetingId || !password || !name) {
            alert("Missing meeting ID, password, or name in the URL");
            return;
        }

        ZoomMtg.preLoadWasm();
        ZoomMtg.prepareJssdk();

        ZoomMtg.init({
            leaveUrl: window.location.href,
            isSupportAV: true,
            success: function () {
                ZoomMtg.join({
                    meetingNumber: meetingId,
                    userName: name,
                    signature: "your_generated_signature_here",  // Replace with your actual signature
                    apiKey: "YOUR_ZOOM_SDK_API_KEY",
                    userEmail: "user@example.com",
                    passWord: password,
                    success: function (res) {
                        console.log("Joined successfully", res);
                    },
                    error: function (error) {
                        console.error("Error joining the meeting", error);
                    }
                });
            },
            error: function (error) {
                console.error("Error initializing the Zoom SDK", error);
            }
        });
    };
</script>
